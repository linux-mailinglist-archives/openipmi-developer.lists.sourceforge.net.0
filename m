Return-Path: <openipmi-developer-bounces@lists.sourceforge.net>
X-Original-To: lists+openipmi-developer@lfdr.de
Delivered-To: lists+openipmi-developer@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 61F6134E9EB
	for <lists+openipmi-developer@lfdr.de>; Tue, 30 Mar 2021 16:11:32 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.sourceforge.net; s=beta; h=Content-Transfer-Encoding:Content-Type:Cc:
	Reply-To:From:List-Subscribe:List-Help:List-Post:List-Archive:
	List-Unsubscribe:List-Id:Subject:MIME-Version:References:In-Reply-To:
	Message-Id:Date:To:Sender:Content-ID:Content-Description:Resent-Date:
	Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Owner;
	 bh=o1/eg1Xb6+93r4ZNpO1b2XDzb4h8ChFUQ+rHXU7pHNw=; b=NkGKslfau2tjFTCSFEiFDGt9S
	k0vmRtQpVyZVq5xOWVL6kCzPUYLWYAbxz5ojYkY9Hzb6t4hg3N0K/WaStHumV/o93IgOHk//z4dax
	49bizo7za0vMWde0dKzo2bdVJWK0NJJgkIOceyhhIeOxZdeJy49fz5fujQo5CzKfWHgm0=;
Received: from [127.0.0.1] (helo=sfs-ml-1.v29.lw.sourceforge.com)
	by sfs-ml-1.v29.lw.sourceforge.com with esmtp (Exim 4.90_1)
	(envelope-from <openipmi-developer-bounces@lists.sourceforge.net>)
	id 1lRF5e-00039p-1S; Tue, 30 Mar 2021 14:11:30 +0000
Received: from [172.30.20.202] (helo=mx.sourceforge.net)
 by sfs-ml-1.v29.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.90_1)
 (envelope-from <quan@os.amperecomputing.com>) id 1lRF5c-00038z-RQ
 for openipmi-developer@lists.sourceforge.net; Tue, 30 Mar 2021 14:11:28 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=MIME-Version:Content-Transfer-Encoding:Content-Type
 :References:In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender:Reply-To:
 Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:
 Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=Bl7AbniGyQZLNJ7+Q4QC8JWrE1KO2/ydCpx9+Flx7Co=; b=W3Oq46tejMV1+Ad9rMkPvTh2gc
 zh587TvKW7GQS9MdAfAelF9Ws9wpdunnIXsD7nbvPGMFJdHldszcxODvdPgvB6TE0uKV//TQAj+FI
 KzMT9kKm5wsY8FMGHL04Of+CjaO6AmhlGyjTHzwHU+pg1+glnMS4tPdizkUfId0WrFd8=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=MIME-Version:Content-Transfer-Encoding:Content-Type:References:
 In-Reply-To:Message-Id:Date:Subject:Cc:To:From:Sender:Reply-To:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=Bl7AbniGyQZLNJ7+Q4QC8JWrE1KO2/ydCpx9+Flx7Co=; b=H+yaFamqbUNC+PCXhbcW/AE3MP
 mvobIVxlPW4+iJmbPp/RHCVu6cWjoRn+sziPyji7Npy4YsIvfCLIFzbPqWLk2U01p7FFTphzZESV/
 vZr4lX5ZlvHcbJNdWaB0UuPjbLFWfyUiqPDG57Vz+DnIAhDJq0trNSbeiQcfKn8WiXPM=;
Received: from mail-dm6nam12on2125.outbound.protection.outlook.com
 ([40.107.243.125] helo=NAM12-DM6-obe.outbound.protection.outlook.com)
 by sfi-mx-2.v28.lw.sourceforge.com with esmtps
 (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256) (Exim 4.92.3)
 id 1lRF5R-0001dB-Nd
 for openipmi-developer@lists.sourceforge.net; Tue, 30 Mar 2021 14:11:27 +0000
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BD0NkUI4i4XvHK5E7Yhnta32tCSaOfURtZwaBAXvUSsmBBpaMaHTBl7KCHVkrfyXOvNyB0v51uTHD4KBqNKKfc5Xau2kkNaY9L/ZirHTCVbpd65ktSjYL3nxg+Qk3HhV1yOns0rFVBNj1wHHoVWuKFa44Ugwu5Ve5fQP3OxC4K5Ao6CbibHIdcrd20cHLInEDJQ/Bcfbdb+cFTqMHb1TZhDY/1Z6/b4uMBSwu84J8dHcw9zM8qtfnIMvvNlsFxP0BZ7PtBkV2iF13t1B22nO1JmyGM6vqiIxWl+8QuIpJ3YF+zRSltR2/nJrZ6WRxbPM7yfQG+3ad8LO4xLPPJpgQw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Bl7AbniGyQZLNJ7+Q4QC8JWrE1KO2/ydCpx9+Flx7Co=;
 b=jP4Q2IoluGDzM9khjJIvCW6gx9CwmTvrs+pGOb8FY73w9HKx3f7odi3wvoc5n18fUedASYt7MKd/xj43dpoaPLpBa63Fl3g+CSCxyo7AtsGrq4b6vrDt0HWbt0iBsHPUSnRdR6L3bgtI/6jR4SCx++P+ql66jibcpfv3rLq1XbYIXhesl0vG2KyhSn+/sWk2fgNrBtMzCthf1l8FEi+CjTjJmgeuOHvsuYjiZG9uI42iz56sJlPUJJcawucoE0xFVd0YZ8uF8/tw+xeyzqqPBdqfEXV/2jti8taIq/WxTWRMtoGXU/VPbLXqy10ZQZPUcox2zPBvIhN3OP4xJRjmVQ==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=os.amperecomputing.com; dmarc=pass action=none
 header.from=os.amperecomputing.com; dkim=pass
 header.d=os.amperecomputing.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=os.amperecomputing.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=Bl7AbniGyQZLNJ7+Q4QC8JWrE1KO2/ydCpx9+Flx7Co=;
 b=tMlLZG8OFm33cpsiqH+YEmLlNWh/Dl8yM+lSIZUduRgyKjYUTJfDwJmnmYjhsvLTlqHPsTpbCZ0oVHUD0mMhcw6s//8LD3g36/s0n9tAkxGSqPQxKKXRHoZS6hKfoJ85KE6zEuZZdfV+23PGxb2cmEC2uHkh4hEMimJcKPHLNqM=
Authentication-Results: acm.org; dkim=none (message not signed)
 header.d=none;acm.org; dmarc=none action=none
 header.from=os.amperecomputing.com;
Received: from MW2PR0102MB3482.prod.exchangelabs.com (2603:10b6:302:c::32) by
 MW4PR01MB6338.prod.exchangelabs.com (2603:10b6:303:7b::15) with
 Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3977.30; Tue, 30 Mar 2021 14:10:59 +0000
Received: from MW2PR0102MB3482.prod.exchangelabs.com
 ([fe80::d840:7aa7:58d4:b503]) by MW2PR0102MB3482.prod.exchangelabs.com
 ([fe80::d840:7aa7:58d4:b503%5]) with mapi id 15.20.3977.033; Tue, 30 Mar 2021
 14:10:59 +0000
To: Corey Minyard <minyard@acm.org>, Rob Herring <robh+dt@kernel.org>,
 Joel Stanley <joel@jms.id.au>, Andrew Jeffery <andrew@aj.id.au>,
 Wolfram Sang <wsa@kernel.org>, Philipp Zabel <p.zabel@pengutronix.de>,
 openipmi-developer@lists.sourceforge.net, devicetree@vger.kernel.org,
 linux-arm-kernel@lists.infradead.org, linux-aspeed@lists.ozlabs.org,
 linux-kernel@vger.kernel.org, linux-i2c@vger.kernel.org
Date: Tue, 30 Mar 2021 21:10:28 +0700
Message-Id: <20210330141029.20412-3-quan@os.amperecomputing.com>
X-Mailer: git-send-email 2.28.0
In-Reply-To: <20210330141029.20412-1-quan@os.amperecomputing.com>
References: <20210330141029.20412-1-quan@os.amperecomputing.com>
X-Originating-IP: [118.69.219.201]
X-ClientProxiedBy: HK0PR03CA0120.apcprd03.prod.outlook.com
 (2603:1096:203:b0::36) To MW2PR0102MB3482.prod.exchangelabs.com
 (2603:10b6:302:c::32)
MIME-Version: 1.0
X-MS-Exchange-MessageSentRepresentingType: 1
Received: from hcm-sw-17.amperecomputing.com (118.69.219.201) by
 HK0PR03CA0120.apcprd03.prod.outlook.com (2603:1096:203:b0::36) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.3977.29 via Frontend Transport; Tue, 30 Mar 2021 14:10:55 +0000
X-MS-PublicTrafficType: Email
X-MS-Office365-Filtering-Correlation-Id: 44c4c0f9-ef12-4f20-552d-08d8f385a45c
X-MS-TrafficTypeDiagnostic: MW4PR01MB6338:
X-MS-Exchange-Transport-Forked: True
X-Microsoft-Antispam-PRVS: <MW4PR01MB6338F9057B655744F3B5FFD5F27D9@MW4PR01MB6338.prod.exchangelabs.com>
X-MS-Oob-TLC-OOBClassifiers: OLM:3044;
X-MS-Exchange-SenderADCheck: 1
X-Microsoft-Antispam: BCL:0;
X-Microsoft-Antispam-Message-Info: gSpemlJkYk4VOSTL4nB6teVURY3xRD5fkvmz3oCx5L/5ylI84aSl6nzGEY5go7swV5z18iWF8qCk24xj3YqFLmKMmi3fh210fivPq/XsrdZsNhNJ8d/6HjPpGZXw3iLGY5QB30KySG5POnDaNVH+v5dD1fRo4TFiWxV6qsSGbqNJQjBxPHOQvedWsbZtEbznkNY89WOUY6cryqIuEUs17d+KkGEp0SRch5HF2gwJqj3Kj1A+++f4Tlxb4ES+4J1PJXfQPYGDylFDC2Kt1xPHWzho5222XEU1ZgIYWF4tgH/xgQpaDzYbChs33/QHLxfSBqmkjwSLEYz5RV8EWOwTGWvCKxTLDr/Rf/S0P3Z7ksc9az0rbKMkVQrp36oz8/M8ibZ9n3+fgueg8ww8vK31XqHEJJM+kOEepB7Z2DQ/tJojOU0a7nShNXj9c6N6OcNXrgz+6PjUVtNxJ6Nsfd8cCmMXI8twU3NeLHgBxvJXtRC4OpHovHWzpts3nHMw2pOgSEAVPoBsSBpeW1JqXeeDLN1UC6hOsQHQ39G/C8Svsg/ye/dQuEk4MNbfXrnFV91pHWP+W5Oym9ZLXHEkemfBsZ8WOhNfUpjxeDrufeT392ZoQALgYsaCOuoKlEpVDsAOtZsMG+FbyXv0VCjiwcK125EC31PLbeIdi4HL9PkRW1n3ueV7A9J7Ehu8560Eq7hnwOmadPEZvmn/RRsyhn3oBOoRa/Uy4Z6vjI2rdMUHNGIDjdn3+plFBxfAVeqAvj2/Z81Y1d/xLG1QGIXWuEvGYw==
X-Forefront-Antispam-Report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:MW2PR0102MB3482.prod.exchangelabs.com; PTR:; CAT:NONE;
 SFS:(4636009)(366004)(2616005)(5660300002)(2906002)(956004)(186003)(16526019)(6512007)(66556008)(66476007)(6666004)(921005)(107886003)(52116002)(8676002)(7416002)(8936002)(86362001)(38100700001)(66946007)(110136005)(6506007)(83380400001)(498600001)(6486002)(4326008)(1076003)(30864003)(26005)(54906003)(2004002);
 DIR:OUT; SFP:1102; 
X-MS-Exchange-AntiSpam-MessageData: =?utf-8?B?NjNRc1AyMXBIby9YNTFNQ3I1NzJWcXp6dXo2NjZmZExqQVFVZG1oOWFVR3Ns?=
 =?utf-8?B?dkpQWTBhMnc1VVZ0Lzd5OE1pMjYwd3Rmd04zaUF3ZGJOKzQvdElYYWhuL2Vz?=
 =?utf-8?B?aW1tUHpXYUR5bnowUFFxM1Irc1NldUVISUZaMzRjZnBjTUtvTXZxTlJzd0Vk?=
 =?utf-8?B?OURGdDhPRjNFY3hlSVRUOHVzZjB1Wkg4bnN0QnFXMFFqV04yOTJqY2FmZHl3?=
 =?utf-8?B?bVM0R2pUMVlpR0t1b3ZpMlpHOWYwNEpNQUJSRVhYaEIrU1MvcEhVOU5yTWkx?=
 =?utf-8?B?M0ZHbE9aMjVPYjVpeWsvUEtqT0xTc0JxYk5yRC85dDlWSWprUUFYMDlZKzVR?=
 =?utf-8?B?Rm1ybG9pY29wbDdxR1dMbzhwREh2ZlJYaXpIblpGdDZ5bU5rQW5NODM3anBZ?=
 =?utf-8?B?US9TY3A5V2pDMmQvZFlWS20wbTFNTHpPaXNIek9aN3hvdzFkYjRadzJsM0tV?=
 =?utf-8?B?dmJhODVqekhQTE5pQmhKUVRDU0lDbFlNRzV6UlpoaWw4R0hTUlpoUHd6dGVD?=
 =?utf-8?B?VFp2R2ZqTmU1Q1VHS3lwMEtYcURMV0wyUWZzUktDbDdoNGZtc1J3UEh5MjY3?=
 =?utf-8?B?NERGNngrNCtnNU9ybDFSWW9NS0RhcjNUdEtIakpqci9HWUluK0h0VmxZSTdU?=
 =?utf-8?B?Vnl4MkpkYTR5RzJWR3M2emE1UHUvQkM0NVlEVmM5TmVqcXptOEpkUzBoTElN?=
 =?utf-8?B?QlFzQU1NbDRoajJYRnl1Y29CcGpnR2pGVS9WeUhtYkdnL3NMUVZMNEYvMGpk?=
 =?utf-8?B?WVFmVld2Z3BudUl0MkZvdkowSFAySFlhZEM5RVJCYXUwN2hycHlnQnY5RWZi?=
 =?utf-8?B?WU15WmxGWVh4b05hbmNKK2NGSEZsZmhHZTNoYTBWdU1PRE5Pc2FjcFFiZDJZ?=
 =?utf-8?B?ZjFFOVo4RFlFMXNvWXVQbGpxMllobHlaTlpORFcxekNUNkhuWWFXaktReFMy?=
 =?utf-8?B?U255K09pdzVzcjhnODlUZjVqTE9YUmh2bWRNQ0tFRjRIT0xNNm1mTGhuQ1ln?=
 =?utf-8?B?TFFKNW8ydVdMNE1xWGZ5dnRqN0hHYTZ6dHVEQW5qQWtGSjA3NWtYM1B2ZkZ3?=
 =?utf-8?B?RWF4ckVSZVVQZnJTd2dSWjhSVXFxbVR1ZkxlbFZLZExsLzhXQmpaT2w2RUVu?=
 =?utf-8?B?elhoeGNybDRQdmEzM29nNjg0ZWZKbW10NHZFeGtEREFWdVZQalVJR1BvMnRB?=
 =?utf-8?B?TkhZSDZSZjRBMzkyTlBVelAyVzJlNkRaZUlGNStZaTlGVmNKbG5BOU12Y0Yx?=
 =?utf-8?B?Z1BTNWxCK2dvV29QUFY0Sk9YeEl0bmgvUlVGWW1wS2RGKzVvMTRFT2hqYUdP?=
 =?utf-8?B?b2dFS2JaT0ZyS3FGR1dWZU1PRXNjUUY5YzJHZzdMRjBUYVZLWmVSd0U4OU1z?=
 =?utf-8?B?dXgwU2tZeUR5TkVpNytRejkzdXZxZ0srTnVVUThDcjkvandEaEFaNUJmMmZF?=
 =?utf-8?B?VFBycVBHblRiVTBkRmdWeExqZ2FQMjBpWndKMkp5OER6ZERlb1BCaDBVcE1z?=
 =?utf-8?B?QVk0WVBhbGQvamFtRlg0N2pUT2hFNjNqSXhuaUFNajIvYzU4VlFFazY0Qkd0?=
 =?utf-8?B?a2xoV0ZhejZsbE5xR2NDZHNkdlR2aGVRMWc1Qk45TENpM2lMQkR0dFVHZjhS?=
 =?utf-8?B?RE1PZkJldWpPWk4ybmxXL1VSM1ZuWkJPSDVUUFpzK3VNWXVtQ2RpVDVscGcw?=
 =?utf-8?B?eHE5YlFZa3ViM0ZOMUV6NnNJQWpqaWJIcWtORUlud28vUzNsSERRVDFUUFF2?=
 =?utf-8?Q?uOvWFARjh7aAlW3g1iyHNhEp+K2ttGAJqs5Uy63?=
X-OriginatorOrg: os.amperecomputing.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 44c4c0f9-ef12-4f20-552d-08d8f385a45c
X-MS-Exchange-CrossTenant-AuthSource: MW2PR0102MB3482.prod.exchangelabs.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 30 Mar 2021 14:10:59.1656 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-CrossTenant-Id: 3bc2b170-fd94-476d-b0ce-4229bdc904a7
X-MS-Exchange-CrossTenant-MailboxType: HOSTED
X-MS-Exchange-CrossTenant-UserPrincipalName: WUJuAzAV1NTx1k5k1de2OfGuZQdwbYLOL7QU2pZxE1mLb82pQBb6Cuzm503waeM8phJP9kpdo0/7USbWJJ+MsyW2hnuCdGgzu4szQ0lN1fE=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: MW4PR01MB6338
X-Spam-Score: -0.1 (/)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
 See http://spamassassin.org/tag/ for more details.
 0.0 URIBL_BLOCKED ADMINISTRATOR NOTICE: The query to URIBL was blocked.
 See
 http://wiki.apache.org/spamassassin/DnsBlocklists#dnsbl-block
 for more information. [URIs: amperecomputing.com]
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/, no
 trust [40.107.243.125 listed in list.dnswl.org]
 -0.0 RCVD_IN_MSPIKE_H2      RBL: Average reputation (+2)
 [40.107.243.125 listed in wl.mailspike.net]
 -0.0 SPF_HELO_PASS          SPF: HELO matches SPF record
 -0.0 SPF_PASS               SPF: sender matches SPF record
 -0.1 DKIM_VALID_AU Message has a valid DKIM or DK signature from author's
 domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature,
 not necessarily valid
 0.0 MSGID_FROM_MTA_HEADER  Message-Id was added by a relay
X-Headers-End: 1lRF5R-0001dB-Nd
Subject: [Openipmi-developer] [PATCH v2 2/3] drivers: char: ipmi: Add Aspeed
 SSIF BMC driver
X-BeenThere: openipmi-developer@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: Developer list of OpenIPMI library and Linux driver
 <openipmi-developer.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/openipmi-developer>, 
 <mailto:openipmi-developer-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=openipmi-developer>
List-Post: <mailto:openipmi-developer@lists.sourceforge.net>
List-Help: <mailto:openipmi-developer-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/openipmi-developer>, 
 <mailto:openipmi-developer-request@lists.sourceforge.net?subject=subscribe>
From: Quan Nguyen via Openipmi-developer
 <openipmi-developer@lists.sourceforge.net>
Reply-To: Quan Nguyen <quan@os.amperecomputing.com>
Cc: openbmc@lists.ozlabs.org, "Thang Q . Nguyen" <thang@os.amperecomputing.com>,
 Open Source Submission <patches@amperecomputing.com>,
 Phong Vo <phong@os.amperecomputing.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openipmi-developer-bounces@lists.sourceforge.net

VGhlIFNNQnVzIHN5c3RlbSBpbnRlcmZhY2UgKFNTSUYpIElQTUkgQk1DIGRyaXZlciBjYW4gYmUg
dXNlZCB0byBwZXJmb3JtCmluLWJhbmQgSVBNSSBjb21tdW5pY2F0aW9uIHdpdGggdGhlaXIgaG9z
dCBpbiBtYW5hZ2VtZW50IChCTUMpIHNpZGUuCgpUaGlzIGNvbW1pdHMgYWRkcyBzdXBwb3J0IHNw
ZWNpZmljYWxseSBmb3IgQXNwZWVkIEFTVDI1MDAgd2hpY2ggY29tbW9ubHkKdXNlZCBhcyBCb2Fy
ZCBNYW5hZ2VtZW50IENvbnRyb2xsZXJzLgoKU2lnbmVkLW9mZi1ieTogUXVhbiBOZ3V5ZW4gPHF1
YW5Ab3MuYW1wZXJlY29tcHV0aW5nLmNvbT4KLS0tCiBkcml2ZXJzL2NoYXIvaXBtaS9LY29uZmln
ICAgICAgICAgICB8ICAyMiArCiBkcml2ZXJzL2NoYXIvaXBtaS9NYWtlZmlsZSAgICAgICAgICB8
ICAgMiArCiBkcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtYy5jICAgICAgICB8IDY0NSArKysrKysr
KysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtYy5oICAgICAg
ICB8ICA5MiArKysrCiBkcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtY19hc3BlZWQuYyB8IDEzMiAr
KysrKysKIDUgZmlsZXMgY2hhbmdlZCwgODkzIGluc2VydGlvbnMoKykKIGNyZWF0ZSBtb2RlIDEw
MDY0NCBkcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtYy5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJp
dmVycy9jaGFyL2lwbWkvc3NpZl9ibWMuaAogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvY2hh
ci9pcG1pL3NzaWZfYm1jX2FzcGVlZC5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9jaGFyL2lwbWkv
S2NvbmZpZyBiL2RyaXZlcnMvY2hhci9pcG1pL0tjb25maWcKaW5kZXggMDc4NDdkOWE0NTlhLi40
NWJlNTcwMjM1NzcgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvY2hhci9pcG1pL0tjb25maWcKKysrIGIv
ZHJpdmVycy9jaGFyL2lwbWkvS2NvbmZpZwpAQCAtMTMzLDYgKzEzMywyOCBAQCBjb25maWcgQVNQ
RUVEX0JUX0lQTUlfQk1DCiAJICBmb3VuZCBvbiBBc3BlZWQgU09DcyAoQVNUMjQwMCBhbmQgQVNU
MjUwMCkuIFRoZSBkcml2ZXIKIAkgIGltcGxlbWVudHMgdGhlIEJNQyBzaWRlIG9mIHRoZSBCVCBp
bnRlcmZhY2UuCiAKK2NvbmZpZyBTU0lGX0lQTUlfQk1DCisJdHJpc3RhdGUgIlNTSUYgSVBNSSBC
TUMgZHJpdmVyIgorCXNlbGVjdCBJMkMKKwlzZWxlY3QgSTJDX1NMQVZFCisJaGVscAorCSAgVGhp
cyBlbmFibGVzIHRoZSBJUE1JIFNNQnVzIHN5c3RlbSBpbnRlcmZhY2UgKFNTSUYpIGF0IHRoZQor
CSAgbWFuYWdlbWVudCAoQk1DKSBzaWRlLgorCisJICBUaGUgZHJpdmVyIGltcGxlbWVudHMgdGhl
IEJNQyBzaWRlIG9mIHRoZSBTTUJ1cyBzeXN0ZW0KKwkgIGludGVyZmFjZSAoU1NJRikuCisKK2Nv
bmZpZyBBU1BFRURfU1NJRl9JUE1JX0JNQworCWRlcGVuZHMgb24gQVJDSF9BU1BFRUQgfHwgQ09N
UElMRV9URVNUCisJc2VsZWN0IFNTSUZfSVBNSV9CTUMKKwl0cmlzdGF0ZSAiQXNwZWVkIFNTSUYg
SVBNSSBCTUMgZHJpdmVyIgorCWhlbHAKKwkgIFByb3ZpZGVzIGEgZHJpdmVyIGZvciB0aGUgU1NJ
RiBJUE1JIGludGVyZmFjZSBmb3VuZCBvbgorCSAgQXNwZWVkIEFTVDI1MDAgU29DLgorCisJICBU
aGUgZHJpdmVyIGltcGxlbWVudHMgdGhlIEJNQyBzaWRlIG9mIHRoZSBTTUJ1cyBzeXN0ZW0KKwkg
IGludGVyZmFjZSAoU1NJRiksIHNwZWNpZmljIGZvciBBc3BlZWQgQVNUMjUwMCBTb0MuCisKIGNv
bmZpZyBJUE1CX0RFVklDRV9JTlRFUkZBQ0UKIAl0cmlzdGF0ZSAnSVBNQiBJbnRlcmZhY2UgaGFu
ZGxlcicKIAlkZXBlbmRzIG9uIEkyQwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9jaGFyL2lwbWkvTWFr
ZWZpbGUgYi9kcml2ZXJzL2NoYXIvaXBtaS9NYWtlZmlsZQppbmRleCAwODIyYWRjMmVjNDEuLjA1
Yjk5M2Y3MzM1YiAxMDA2NDQKLS0tIGEvZHJpdmVycy9jaGFyL2lwbWkvTWFrZWZpbGUKKysrIGIv
ZHJpdmVycy9jaGFyL2lwbWkvTWFrZWZpbGUKQEAgLTI3LDMgKzI3LDUgQEAgb2JqLSQoQ09ORklH
X0FTUEVFRF9CVF9JUE1JX0JNQykgKz0gYnQtYm1jLm8KIG9iai0kKENPTkZJR19BU1BFRURfS0NT
X0lQTUlfQk1DKSArPSBrY3NfYm1jX2FzcGVlZC5vCiBvYmotJChDT05GSUdfTlBDTTdYWF9LQ1Nf
SVBNSV9CTUMpICs9IGtjc19ibWNfbnBjbTd4eC5vCiBvYmotJChDT05GSUdfSVBNQl9ERVZJQ0Vf
SU5URVJGQUNFKSArPSBpcG1iX2Rldl9pbnQubworb2JqLSQoQ09ORklHX1NTSUZfSVBNSV9CTUMp
ICs9IHNzaWZfYm1jLm8KK29iai0kKENPTkZJR19BU1BFRURfU1NJRl9JUE1JX0JNQykgKz0gc3Np
Zl9ibWNfYXNwZWVkLm8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvY2hhci9pcG1pL3NzaWZfYm1jLmMg
Yi9kcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtYy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4
IDAwMDAwMDAwMDAwMC4uYWU2ZTg3NTBjNzk1Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9j
aGFyL2lwbWkvc3NpZl9ibWMuYwpAQCAtMCwwICsxLDY0NSBAQAorLy8gU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6IEdQTC0yLjArCisvKgorICogVGhlIGRyaXZlciBmb3IgQk1DIHNpZGUgb2YgU1NJ
RiBpbnRlcmZhY2UKKyAqCisgKiBDb3B5cmlnaHQgKGMpIDIwMjEsIEFtcGVyZSBDb21wdXRpbmcg
TExDCisgKgorICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0
cmlidXRlIGl0IGFuZC9vcgorICogbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05V
IEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMKKyAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0
d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mCisgKiB0aGUgTGljZW5zZSwgb3Ig
KGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKyAqCisgKiBUaGlzIHByb2dyYW0g
aXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAqIGJ1
dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5
IG9mCisgKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBP
U0UuICBTZWUgdGhlCisgKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRh
aWxzLgorICoKKyAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBH
ZW5lcmFsIFB1YmxpYyBMaWNlbnNlCisgKiBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5v
dCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisgKi8KKworI2luY2x1ZGUg
PGxpbnV4L2kyYy5oPgorI2luY2x1ZGUgPGxpbnV4L21pc2NkZXZpY2UuaD4KKyNpbmNsdWRlIDxs
aW51eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9vZi5oPgorI2luY2x1ZGUgPGxpbnV4L3Bs
YXRmb3JtX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L3BvbGwuaD4KKyNpbmNsdWRlIDxsaW51
eC9zY2hlZC5oPgorI2luY2x1ZGUgPGxpbnV4L211dGV4Lmg+CisjaW5jbHVkZSA8bGludXgvc3Bp
bmxvY2suaD4KKworI2luY2x1ZGUgInNzaWZfYm1jLmgiCisKKy8qCisgKiBDYWxsIGluIFdSSVRF
IGNvbnRleHQKKyAqLworc3RhdGljIGludCBzZW5kX3NzaWZfYm1jX3Jlc3BvbnNlKHN0cnVjdCBz
c2lmX2JtY19jdHggKnNzaWZfYm1jLCBib29sIG5vbl9ibG9ja2luZykKK3sKKwl1bnNpZ25lZCBs
b25nIGZsYWdzOworCWludCByZXQ7CisKKwlpZiAoIW5vbl9ibG9ja2luZykgeworcmV0cnk6CisJ
CXJldCA9IHdhaXRfZXZlbnRfaW50ZXJydXB0aWJsZShzc2lmX2JtYy0+d2FpdF9xdWV1ZSwKKwkJ
CQkJICAgICAgICFzc2lmX2JtYy0+cmVzcG9uc2VfaW5fcHJvZ3Jlc3MpOworCQlpZiAocmV0KQor
CQkJcmV0dXJuIHJldDsKKwl9CisKKwlzcGluX2xvY2tfaXJxc2F2ZSgmc3NpZl9ibWMtPmxvY2ss
IGZsYWdzKTsKKwlpZiAoc3NpZl9ibWMtPnJlc3BvbnNlX2luX3Byb2dyZXNzKSB7CisJCXNwaW5f
dW5sb2NrX2lycXJlc3RvcmUoJnNzaWZfYm1jLT5sb2NrLCBmbGFncyk7CisJCWlmIChub25fYmxv
Y2tpbmcpCisJCQlyZXR1cm4gLUVBR0FJTjsKKworCQlnb3RvIHJldHJ5OworCX0KKworCS8qCisJ
ICogQ2hlY2sgdGhlIHJlc3BvbnNlIGRhdGEgbGVuZ3RoIGZyb20gdXNlcnNwYWNlIHRvIGRldGVy
bWluZSB0aGUgdHlwZQorCSAqIG9mIHRoZSByZXNwb25zZSBtZXNzYWdlIHdoZXRoZXIgaXQgaXMg
c2luZ2xlLXBhcnQgb3IgbXVsdGktcGFydC4KKwkgKi8KKwlzc2lmX2JtYy0+aXNfc2luZ2xlcGFy
dF9yZWFkID0KKwkJKHNzaWZfbXNnX2xlbigmc3NpZl9ibWMtPnJlc3BvbnNlKSA8PSAoTUFYX1BB
WUxPQURfUEVSX1RSQU5TQUNUSU9OICsgMSkpID8KKwkJdHJ1ZSA6IGZhbHNlOyAvKiAxOiBieXRl
IG9mIGxlbmd0aCAqLworCisJc3NpZl9ibWMtPnJlc3BvbnNlX2luX3Byb2dyZXNzID0gdHJ1ZTsK
KwlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZzc2lmX2JtYy0+bG9jaywgZmxhZ3MpOworCisJcmV0
dXJuIDA7Cit9CisKKy8qCisgKiBDYWxsIGluIFJFQUQgY29udGV4dAorICovCitzdGF0aWMgaW50
IHJlY2VpdmVfc3NpZl9ibWNfcmVxdWVzdChzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2JtYywg
Ym9vbCBub25fYmxvY2tpbmcpCit7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKwlpbnQgcmV0Owor
CisJaWYgKCFub25fYmxvY2tpbmcpIHsKK3JldHJ5OgorCQlyZXQgPSB3YWl0X2V2ZW50X2ludGVy
cnVwdGlibGUoc3NpZl9ibWMtPndhaXRfcXVldWUsCisJCQkJCSAgICAgICBzc2lmX2JtYy0+cmVx
dWVzdF9hdmFpbGFibGUpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsKKwl9CisKKwlzcGlu
X2xvY2tfaXJxc2F2ZSgmc3NpZl9ibWMtPmxvY2ssIGZsYWdzKTsKKwlpZiAoIXNzaWZfYm1jLT5y
ZXF1ZXN0X2F2YWlsYWJsZSkgeworCQlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZzc2lmX2JtYy0+
bG9jaywgZmxhZ3MpOworCQlpZiAobm9uX2Jsb2NraW5nKQorCQkJcmV0dXJuIC1FQUdBSU47CisJ
CWdvdG8gcmV0cnk7CisJfQorCXNwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnNzaWZfYm1jLT5sb2Nr
LCBmbGFncyk7CisKKwlyZXR1cm4gMDsKK30KKworLyogSGFuZGxlIFNTSUYgbWVzc2FnZSB0aGF0
IHdpbGwgYmUgc2VudCB0byB1c2VyICovCitzdGF0aWMgc3NpemVfdCBzc2lmX2JtY19yZWFkKHN0
cnVjdCBmaWxlICpmaWxlLCBjaGFyIF9fdXNlciAqYnVmLCBzaXplX3QgY291bnQsIGxvZmZfdCAq
cHBvcykKK3sKKwlzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2JtYyA9IHRvX3NzaWZfYm1jKGZp
bGUpOworCXN0cnVjdCBzc2lmX21zZyBtc2c7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKwlzc2l6
ZV90IHJldDsKKworCW11dGV4X2xvY2soJnNzaWZfYm1jLT5maWxlX211dGV4KTsKKworCXJldCA9
IHJlY2VpdmVfc3NpZl9ibWNfcmVxdWVzdChzc2lmX2JtYywgZmlsZS0+Zl9mbGFncyAmIE9fTk9O
QkxPQ0spOworCWlmIChyZXQgPCAwKQorCQlnb3RvIG91dDsKKworCXNwaW5fbG9ja19pcnFzYXZl
KCZzc2lmX2JtYy0+bG9jaywgZmxhZ3MpOworCWNvdW50ID0gbWluX3Qoc3NpemVfdCwgY291bnQs
IHNzaWZfbXNnX2xlbigmc3NpZl9ibWMtPnJlcXVlc3QpKTsKKwltZW1jcHkoJm1zZywgJnNzaWZf
Ym1jLT5yZXF1ZXN0LCBjb3VudCk7CisJc3NpZl9ibWMtPnJlcXVlc3RfYXZhaWxhYmxlID0gZmFs
c2U7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc3NpZl9ibWMtPmxvY2ssIGZsYWdzKTsKKwor
CXJldCA9IGNvcHlfdG9fdXNlcihidWYsICZtc2csIGNvdW50KTsKK291dDoKKwltdXRleF91bmxv
Y2soJnNzaWZfYm1jLT5maWxlX211dGV4KTsKKworCXJldHVybiAocmV0IDwgMCkgPyByZXQgOiBj
b3VudDsKK30KKworLyogSGFuZGxlIFNTSUYgbWVzc2FnZSB0aGF0IGlzIHdyaXR0ZW4gYnkgdXNl
ciAqLworc3RhdGljIHNzaXplX3Qgc3NpZl9ibWNfd3JpdGUoc3RydWN0IGZpbGUgKmZpbGUsIGNv
bnN0IGNoYXIgX191c2VyICpidWYsIHNpemVfdCBjb3VudCwKKwkJCSAgICAgIGxvZmZfdCAqcHBv
cykKK3sKKwlzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2JtYyA9IHRvX3NzaWZfYm1jKGZpbGUp
OworCXN0cnVjdCBzc2lmX21zZyBtc2c7CisJdW5zaWduZWQgbG9uZyBmbGFnczsKKwlzc2l6ZV90
IHJldDsKKworCWlmIChjb3VudCA+IHNpemVvZihzdHJ1Y3Qgc3NpZl9tc2cpKQorCQlyZXR1cm4g
LUVJTlZBTDsKKworCW11dGV4X2xvY2soJnNzaWZfYm1jLT5maWxlX211dGV4KTsKKworCXJldCA9
IGNvcHlfZnJvbV91c2VyKCZtc2csIGJ1ZiwgY291bnQpOworCWlmIChyZXQpCisJCWdvdG8gb3V0
OworCisJc3Bpbl9sb2NrX2lycXNhdmUoJnNzaWZfYm1jLT5sb2NrLCBmbGFncyk7CisJaWYgKGNv
dW50ID49IHNzaWZfbXNnX2xlbigmc3NpZl9ibWMtPnJlc3BvbnNlKSkKKwkJbWVtY3B5KCZzc2lm
X2JtYy0+cmVzcG9uc2UsICZtc2csIGNvdW50KTsKKwllbHNlCisJCXJldCA9IC1FSU5WQUw7CisJ
c3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmc3NpZl9ibWMtPmxvY2ssIGZsYWdzKTsKKworCWlmIChy
ZXQpCisJCWdvdG8gb3V0OworCisJcmV0ID0gc2VuZF9zc2lmX2JtY19yZXNwb25zZShzc2lmX2Jt
YywgZmlsZS0+Zl9mbGFncyAmIE9fTk9OQkxPQ0spOworCWlmICghcmV0ICYmIHNzaWZfYm1jLT5z
ZXRfc3NpZl9ibWNfc3RhdHVzKQorCQlzc2lmX2JtYy0+c2V0X3NzaWZfYm1jX3N0YXR1cyhzc2lm
X2JtYywgU1NJRl9CTUNfUkVBRFkpOworb3V0OgorCW11dGV4X3VubG9jaygmc3NpZl9ibWMtPmZp
bGVfbXV0ZXgpOworCisJcmV0dXJuIChyZXQgPCAwKSA/IHJldCA6IGNvdW50OworfQorCitzdGF0
aWMgbG9uZyBzc2lmX2JtY19pb2N0bChzdHJ1Y3QgZmlsZSAqZmlsZSwgdW5zaWduZWQgaW50IGNt
ZCwgdW5zaWduZWQgbG9uZyBwYXJhbSkKK3sKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHVuc2ln
bmVkIGludCBzc2lmX2JtY19wb2xsKHN0cnVjdCBmaWxlICpmaWxlLCBwb2xsX3RhYmxlICp3YWl0
KQoreworCXN0cnVjdCBzc2lmX2JtY19jdHggKnNzaWZfYm1jID0gdG9fc3NpZl9ibWMoZmlsZSk7
CisJdW5zaWduZWQgaW50IG1hc2sgPSAwOworCisJbXV0ZXhfbG9jaygmc3NpZl9ibWMtPmZpbGVf
bXV0ZXgpOworCXBvbGxfd2FpdChmaWxlLCAmc3NpZl9ibWMtPndhaXRfcXVldWUsIHdhaXQpOwor
CisJLyoKKwkgKiBUaGUgcmVxdWVzdCBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgc28gdXNlcnNw
YWNlIGFwcGxpY2F0aW9uIGNhbgorCSAqIGdldCB0aGUgcmVxdWVzdAorCSAqLworCWlmIChzc2lm
X2JtYy0+cmVxdWVzdF9hdmFpbGFibGUpCisJCW1hc2sgfD0gUE9MTElOOworCisJbXV0ZXhfdW5s
b2NrKCZzc2lmX2JtYy0+ZmlsZV9tdXRleCk7CisJcmV0dXJuIG1hc2s7Cit9CisKKy8qCisgKiBT
eXN0ZW0gY2FsbHMgdG8gZGV2aWNlIGludGVyZmFjZSBmb3IgdXNlciBhcHBzCisgKi8KK3N0YXRp
YyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIHNzaWZfYm1jX2ZvcHMgPSB7CisJLm93bmVy
CQk9IFRISVNfTU9EVUxFLAorCS5yZWFkCQk9IHNzaWZfYm1jX3JlYWQsCisJLndyaXRlCQk9IHNz
aWZfYm1jX3dyaXRlLAorCS5wb2xsCQk9IHNzaWZfYm1jX3BvbGwsCisJLnVubG9ja2VkX2lvY3Rs
CT0gc3NpZl9ibWNfaW9jdGwsCit9OworCisvKiBDYWxsZWQgd2l0aCBzc2lmX2JtYy0+bG9jayBo
ZWxkLiAqLworc3RhdGljIGludCBoYW5kbGVfcmVxdWVzdChzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpz
c2lmX2JtYykKK3sKKwlpZiAoc3NpZl9ibWMtPnNldF9zc2lmX2JtY19zdGF0dXMpCisJCXNzaWZf
Ym1jLT5zZXRfc3NpZl9ibWNfc3RhdHVzKHNzaWZfYm1jLCBTU0lGX0JNQ19CVVNZKTsKKworCS8q
IFJlcXVlc3QgbWVzc2FnZSBpcyBhdmFpbGFibGUgdG8gcHJvY2VzcyAqLworCXNzaWZfYm1jLT5y
ZXF1ZXN0X2F2YWlsYWJsZSA9IHRydWU7CisJLyoKKwkgKiBUaGlzIGlzIHRoZSBuZXcgUkVBRCBy
ZXF1ZXN0LgorCSAqIENsZWFyIHRoZSByZXNwb25zZSBidWZmZXIgb2YgdGhlIHByZXZpb3VzIHRy
YW5zYWN0aW9uCisJICovCisJbWVtc2V0KCZzc2lmX2JtYy0+cmVzcG9uc2UsIDAsIHNpemVvZihz
dHJ1Y3Qgc3NpZl9tc2cpKTsKKwl3YWtlX3VwX2FsbCgmc3NpZl9ibWMtPndhaXRfcXVldWUpOwor
CXJldHVybiAwOworfQorCisvKiBDYWxsZWQgd2l0aCBzc2lmX2JtYy0+bG9jayBoZWxkLiAqLwor
c3RhdGljIGludCBjb21wbGV0ZV9yZXNwb25zZShzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2Jt
YykKK3sKKwkvKiBJbnZhbGlkYXRlIHJlc3BvbnNlIGluIGJ1ZmZlciB0byBkZW5vdGUgaXQgaGF2
aW5nIGJlZW4gc2VudC4gKi8KKwlzc2lmX2JtYy0+cmVzcG9uc2UubGVuID0gMDsKKwlzc2lmX2Jt
Yy0+cmVzcG9uc2VfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKKwlzc2lmX2JtYy0+bmJ5dGVzX3Byb2Nl
c3NlZCA9IDA7CisJc3NpZl9ibWMtPnJlbWFpbl9sZW4gPSAwOworCW1lbXNldCgmc3NpZl9ibWMt
PnJlc3BvbnNlX2J1ZiwgMCwgTUFYX1BBWUxPQURfUEVSX1RSQU5TQUNUSU9OKTsKKwl3YWtlX3Vw
X2FsbCgmc3NpZl9ibWMtPndhaXRfcXVldWUpOworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9p
ZCBzZXRfbXVsdGlwYXJ0X3Jlc3BvbnNlX2J1ZmZlcihzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lm
X2JtYywgdTggKnZhbCkKK3sKKwl1OCByZXNwb25zZV9sZW4gPSAwOworCWludCBpZHggPSAwOwor
CXU4IGRhdGFfbGVuOworCisJZGF0YV9sZW4gPSBzc2lmX2JtYy0+cmVzcG9uc2UubGVuOworCXN3
aXRjaCAoc3NpZl9ibWMtPnNtYnVzX2NtZCkgeworCWNhc2UgU1NJRl9JUE1JX01VTFRJUEFSVF9S
RUFEX1NUQVJUOgorCQkvKgorCQkgKiBSZWFkIFN0YXJ0IGxlbmd0aCBpcyAzMiBieXRlcy4KKwkJ
ICogUmVhZCBTdGFydCB0cmFuc2ZlciBmaXJzdCAzMCBieXRlcyBvZiBJUE1JIHJlc3BvbnNlCisJ
CSAqIGFuZCAyIHNwZWNpYWwgY29kZSAweDAwLCAweDAxLgorCQkgKi8KKwkJKnZhbCA9IE1BWF9Q
QVlMT0FEX1BFUl9UUkFOU0FDVElPTjsKKwkJc3NpZl9ibWMtPnJlbWFpbl9sZW4gPSBkYXRhX2xl
biAtIE1BWF9JUE1JX0RBVEFfUEVSX1NUQVJUX1RSQU5TQUNUSU9OOworCQlzc2lmX2JtYy0+Ymxv
Y2tfbnVtID0gMDsKKworCQlzc2lmX2JtYy0+cmVzcG9uc2VfYnVmW2lkeCsrXSA9IDB4MDA7IC8q
IFN0YXJ0IEZsYWcgKi8KKwkJc3NpZl9ibWMtPnJlc3BvbnNlX2J1ZltpZHgrK10gPSAweDAxOyAv
KiBTdGFydCBGbGFnICovCisJCXNzaWZfYm1jLT5yZXNwb25zZV9idWZbaWR4KytdID0gc3NpZl9i
bWMtPnJlc3BvbnNlLm5ldGZuX2x1bjsKKwkJc3NpZl9ibWMtPnJlc3BvbnNlX2J1ZltpZHgrK10g
PSBzc2lmX2JtYy0+cmVzcG9uc2UuY21kOworCQlzc2lmX2JtYy0+cmVzcG9uc2VfYnVmW2lkeCsr
XSA9IHNzaWZfYm1jLT5yZXNwb25zZS5wYXlsb2FkWzBdOworCisJCXJlc3BvbnNlX2xlbiA9IE1B
WF9QQVlMT0FEX1BFUl9UUkFOU0FDVElPTiAtIGlkeDsKKworCQltZW1jcHkoJnNzaWZfYm1jLT5y
ZXNwb25zZV9idWZbaWR4XSwgJnNzaWZfYm1jLT5yZXNwb25zZS5wYXlsb2FkWzFdLAorCQkgICAg
ICAgcmVzcG9uc2VfbGVuKTsKKwkJYnJlYWs7CisKKwljYXNlIFNTSUZfSVBNSV9NVUxUSVBBUlRf
UkVBRF9NSURETEU6CisJCS8qCisJCSAqIElQTUkgUkVBRCBNaWRkbGUgb3IgUkVBRCBFbmQgbWVz
c2FnZXMgY2FuIGNhcnJ5IHVwIHRvIDMxIGJ5dGVzCisJCSAqIElQTUkgZGF0YSBwbHVzIGJsb2Nr
IG51bWJlciBieXRlLgorCQkgKi8KKwkJaWYgKHNzaWZfYm1jLT5yZW1haW5fbGVuIDwgTUFYX0lQ
TUlfREFUQV9QRVJfTUlERExFX1RSQU5TQUNUSU9OKSB7CisJCQkvKgorCQkJICogVGhpcyBpcyBS
RUFEIEVuZCBtZXNzYWdlCisJCQkgKiAgUmV0dXJuIGxlbmd0aCBpcyB0aGUgcmVtYWluaW5nIHJl
c3BvbnNlIGRhdGEgbGVuZ3RoCisJCQkgKiAgcGx1cyBibG9jayBudW1iZXIKKwkJCSAqICBCbG9j
ayBudW1iZXIgMHhGRiBpcyB0byBpbmRpY2F0ZSB0aGlzIGlzIGxhc3QgbWVzc2FnZQorCQkJICoK
KwkJCSAqIFJldHVybiBsZW5ndGggaXM6IHJlbWFpbiByZXNwb25zZSBwbHVzIGJsb2NrIG51bWJl
cgorCQkJICovCisJCQkqdmFsID0gc3NpZl9ibWMtPnJlbWFpbl9sZW4gKyAxOworCQkJc3NpZl9i
bWMtPmJsb2NrX251bSA9IDB4RkY7CisJCQlzc2lmX2JtYy0+cmVzcG9uc2VfYnVmW2lkeCsrXSA9
IHNzaWZfYm1jLT5ibG9ja19udW07CisJCQlyZXNwb25zZV9sZW4gPSBzc2lmX2JtYy0+cmVtYWlu
X2xlbjsKKwkJfSBlbHNlIHsKKwkJCS8qCisJCQkgKiBUaGlzIGlzIFJFQUQgTWlkZGxlIG1lc3Nh
Z2UKKwkJCSAqICBSZXNwb25zZSBsZW5ndGggaXMgdGhlIG1heGltdW0gU01CVVMgdHJhbnNmZXIg
bGVuZ3RoCisJCQkgKiAgQmxvY2sgbnVtYmVyIGJ5dGUgaXMgaW5jcmVtZW50ZWQKKwkJCSAqIFJl
dHVybiBsZW5ndGggaXMgbWF4aW11bSBTTUJVUyB0cmFuc2ZlciBsZW5ndGgKKwkJCSAqLworCQkJ
KnZhbCA9IE1BWF9QQVlMT0FEX1BFUl9UUkFOU0FDVElPTjsKKwkJCXNzaWZfYm1jLT5yZW1haW5f
bGVuIC09IE1BWF9JUE1JX0RBVEFfUEVSX01JRERMRV9UUkFOU0FDVElPTjsKKwkJCXJlc3BvbnNl
X2xlbiA9IE1BWF9JUE1JX0RBVEFfUEVSX01JRERMRV9UUkFOU0FDVElPTjsKKwkJCXNzaWZfYm1j
LT5yZXNwb25zZV9idWZbaWR4KytdID0gc3NpZl9ibWMtPmJsb2NrX251bTsKKwkJCXNzaWZfYm1j
LT5ibG9ja19udW0rKzsKKwkJfQorCisJCW1lbWNweSgmc3NpZl9ibWMtPnJlc3BvbnNlX2J1Zltp
ZHhdLAorCQkgICAgICAgc3NpZl9ibWMtPnJlc3BvbnNlLnBheWxvYWQgKyAxICsgc3NpZl9ibWMt
Pm5ieXRlc19wcm9jZXNzZWQsCisJCSAgICAgICByZXNwb25zZV9sZW4pOworCQlicmVhazsKKwor
CWRlZmF1bHQ6CisJCS8qIERvIG5vdCBleHBlY3QgdG8gZ28gdG8gdGhpcyBjYXNlICovCisJCXBy
X2VycigiRXJyb3I6IFVuZXhwZWN0ZWQgU01CdXMgY29tbWFuZCByZWNlaXZlZCAweCV4XG4iLCBz
c2lmX2JtYy0+c21idXNfY21kKTsKKwkJYnJlYWs7CisJfQorCisJc3NpZl9ibWMtPm5ieXRlc19w
cm9jZXNzZWQgKz0gcmVzcG9uc2VfbGVuOworfQorCitzdGF0aWMgdm9pZCBzZXRfc2luZ2xlcGFy
dF9yZXNwb25zZV9idWZmZXIoc3RydWN0IHNzaWZfYm1jX2N0eCAqc3NpZl9ibWMsIHU4ICp2YWwp
Cit7CisJdTggKmJ1ZiA9ICh1OCAqKSZzc2lmX2JtYy0+cmVzcG9uc2U7CisKKwkvKgorCSAqIERv
IG5vdCBleHBlY3QgdGhlIElQTUkgcmVzcG9uc2UgaGFzIGRhdGEgbGVuZ3RoIDAuCisJICogV2l0
aCBzb21lIEkyQyBTTUJ1cyBjb250cm9sbGVycyAoQXNwZWVkIEkyQyksIHJldHVybiAwIGZvcgor
CSAqIHRoZSBTTUJ1cyBSZWFkIFJlcXVlc3QgY2FsbGJhY2sgbWlnaHQgY2F1c2UgYmFkIHN0YXRl
IGZvcgorCSAqIHRoZSBidXMuIFNvIHJldHVybiAxIGJ5dGUgbGVuZ3RoIHNvIHRoYXQgbWFzdGVy
IHdpbGwKKwkgKiByZXNlbmQgdGhlIFJlYWQgUmVxdWVzdCBiZWNhdXNlIHRoZSBsZW5ndGggb2Yg
cmVzcG9uc2UgaXMKKwkgKiBsZXNzIHRoYW4gYSBub3JtYWwgSVBNSSByZXNwb25zZS4KKwkgKgor
CSAqIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBsZW5ndGggb2YgSVBNSSByZXNwb25zZQorCSAqLwor
CSp2YWwgPSAoYnVmW3NzaWZfYm1jLT5tc2dfaWR4XSkgPyBidWZbc3NpZl9ibWMtPm1zZ19pZHhd
IDogMHgxOworfQorCisvKiBQcm9jZXNzIHRoZSBJUE1JIHJlc3BvbnNlIHRoYXQgd2lsbCBiZSBy
ZWFkIGJ5IG1hc3RlciAqLworc3RhdGljIHZvaWQgaGFuZGxlX3JlYWRfcHJvY2Vzc2VkKHN0cnVj
dCBzc2lmX2JtY19jdHggKnNzaWZfYm1jLCB1OCAqdmFsKQoreworCXU4ICpidWY7CisJdTggcGVj
X2xlbiwgYWRkciwgbGVuOworCXU4IHBlYyA9IDA7CisKKwlwZWNfbGVuID0gc3NpZl9ibWMtPnBl
Y19zdXBwb3J0ID8gMSA6IDA7CisJLyogUEVDIC0gU3RhcnQgUmVhZCBBZGRyZXNzICovCisJYWRk
ciA9IEdFVF84QklUX0FERFIoc3NpZl9ibWMtPmNsaWVudC0+YWRkcik7CisJcGVjID0gaTJjX3Nt
YnVzX3BlYyhwZWMsICZhZGRyLCAxKTsKKwkvKiBQRUMgLSBTU0lGIENvbW1hbmQgKi8KKwlwZWMg
PSBpMmNfc21idXNfcGVjKHBlYywgJnNzaWZfYm1jLT5zbWJ1c19jbWQsIDEpOworCS8qIFBFQyAt
IFJlc3RhcnQgV3JpdGUgQWRkcmVzcyAqLworCWFkZHIgPSBhZGRyIHwgMHgwMTsKKwlwZWMgPSBp
MmNfc21idXNfcGVjKHBlYywgJmFkZHIsIDEpOworCisJaWYgKHNzaWZfYm1jLT5pc19zaW5nbGVw
YXJ0X3JlYWQpIHsKKwkJLyogU2luZ2xlLXBhcnQgUmVhZCBwcm9jZXNzaW5nICovCisJCWJ1ZiA9
ICh1OCAqKSZzc2lmX2JtYy0+cmVzcG9uc2U7CisKKwkJaWYgKHNzaWZfYm1jLT5yZXNwb25zZS5s
ZW4gJiYgc3NpZl9ibWMtPm1zZ19pZHggPCBzc2lmX2JtYy0+cmVzcG9uc2UubGVuKSB7CisJCQlz
c2lmX2JtYy0+bXNnX2lkeCsrOworCQkJKnZhbCA9IGJ1Zltzc2lmX2JtYy0+bXNnX2lkeF07CisJ
CX0gZWxzZSBpZiAoc3NpZl9ibWMtPnJlc3BvbnNlLmxlbiAmJgorCQkJICAgKHNzaWZfYm1jLT5t
c2dfaWR4ID09IHNzaWZfYm1jLT5yZXNwb25zZS5sZW4pKSB7CisJCQlzc2lmX2JtYy0+bXNnX2lk
eCsrOworCQkJKnZhbCA9IGkyY19zbWJ1c19wZWMocGVjLCBidWYsIHNzaWZfbXNnX2xlbigmc3Np
Zl9ibWMtPnJlc3BvbnNlKSk7CisJCX0gZWxzZSB7CisJCQkqdmFsID0gMDsKKwkJfQorCQkvKiBJ
bnZhbGlkYXRlIHJlc3BvbnNlIGJ1ZmZlciB0byBkZW5vdGUgaXQgaXMgc2VudCAqLworCQlpZiAo
c3NpZl9ibWMtPm1zZ19pZHggKyAxID49IChzc2lmX21zZ19sZW4oJnNzaWZfYm1jLT5yZXNwb25z
ZSkgKyBwZWNfbGVuKSkKKwkJCWNvbXBsZXRlX3Jlc3BvbnNlKHNzaWZfYm1jKTsKKwl9IGVsc2Ug
eworCQkvKiBNdWx0aS1wYXJ0IFJlYWQgcHJvY2Vzc2luZyAqLworCQlzd2l0Y2ggKHNzaWZfYm1j
LT5zbWJ1c19jbWQpIHsKKwkJY2FzZSBTU0lGX0lQTUlfTVVMVElQQVJUX1JFQURfU1RBUlQ6CisJ
CWNhc2UgU1NJRl9JUE1JX01VTFRJUEFSVF9SRUFEX01JRERMRToKKwkJCWJ1ZiA9ICh1OCAqKSZz
c2lmX2JtYy0+cmVzcG9uc2VfYnVmOworCQkJKnZhbCA9IGJ1Zltzc2lmX2JtYy0+bXNnX2lkeF07
CisJCQlzc2lmX2JtYy0+bXNnX2lkeCsrOworCQkJYnJlYWs7CisJCWRlZmF1bHQ6CisJCQkvKiBE
byBub3QgZXhwZWN0IHRvIGdvIHRvIHRoaXMgY2FzZSAqLworCQkJcHJfZXJyKCJFcnJvcjogVW5l
eHBlY3RlZCBTTUJ1cyBjb21tYW5kIHJlY2VpdmVkIDB4JXhcbiIsCisJCQkgICAgICAgc3NpZl9i
bWMtPnNtYnVzX2NtZCk7CisJCQlicmVhazsKKwkJfQorCQlsZW4gPSAoc3NpZl9ibWMtPmJsb2Nr
X251bSA9PSAweEZGKSA/CisJCSAgICAgICBzc2lmX2JtYy0+cmVtYWluX2xlbiArIDEgOiBNQVhf
UEFZTE9BRF9QRVJfVFJBTlNBQ1RJT047CisJCWlmIChzc2lmX2JtYy0+bXNnX2lkeCA9PSAobGVu
ICsgMSkpIHsKKwkJCXBlYyA9IGkyY19zbWJ1c19wZWMocGVjLCAmbGVuLCAxKTsKKwkJCSp2YWwg
PSBpMmNfc21idXNfcGVjKHBlYywgc3NpZl9ibWMtPnJlc3BvbnNlX2J1ZiwgbGVuKTsKKwkJfQor
CQkvKiBJbnZhbGlkYXRlIHJlc3BvbnNlIGJ1ZmZlciB0byBkZW5vdGUgbGFzdCByZXNwb25zZSBp
cyBzZW50ICovCisJCWlmIChzc2lmX2JtYy0+YmxvY2tfbnVtID09IDB4RkYgJiYKKwkJICAgIHNz
aWZfYm1jLT5tc2dfaWR4ID4gKHNzaWZfYm1jLT5yZW1haW5fbGVuICsgcGVjX2xlbikpIHsKKwkJ
CWNvbXBsZXRlX3Jlc3BvbnNlKHNzaWZfYm1jKTsKKwkJfQorCX0KK30KKworc3RhdGljIHZvaWQg
aGFuZGxlX3dyaXRlX3JlY2VpdmVkKHN0cnVjdCBzc2lmX2JtY19jdHggKnNzaWZfYm1jLCB1OCAq
dmFsKQoreworCXU4ICpidWY7CisJdTggc21idXNfY21kOworCisJYnVmID0gKHU4ICopJnNzaWZf
Ym1jLT5yZXF1ZXN0OworCWlmIChzc2lmX2JtYy0+bXNnX2lkeCA+PSBzaXplb2Yoc3RydWN0IHNz
aWZfbXNnKSkKKwkJcmV0dXJuOworCisJc21idXNfY21kID0gc3NpZl9ibWMtPnNtYnVzX2NtZDsK
Kwlzd2l0Y2ggKHNtYnVzX2NtZCkgeworCWNhc2UgU1NJRl9JUE1JX1NJTkdMRVBBUlRfV1JJVEU6
CisJCS8qIFNpbmdsZS1wYXJ0IHdyaXRlICovCisJCWJ1Zltzc2lmX2JtYy0+bXNnX2lkeCAtIDFd
ID0gKnZhbDsKKwkJc3NpZl9ibWMtPm1zZ19pZHgrKzsKKworCQlicmVhazsKKwljYXNlIFNTSUZf
SVBNSV9NVUxUSVBBUlRfV1JJVEVfU1RBUlQ6CisJCS8qIFJlc2V0IGxlbmd0aCB0byB6ZXJvICov
CisJCWlmIChzc2lmX2JtYy0+bXNnX2lkeCA9PSAxKQorCQkJc3NpZl9ibWMtPnJlcXVlc3QubGVu
ID0gMDsKKworCQlmYWxsdGhyb3VnaDsKKwljYXNlIFNTSUZfSVBNSV9NVUxUSVBBUlRfV1JJVEVf
TUlERExFOgorCWNhc2UgU1NJRl9JUE1JX01VTFRJUEFSVF9XUklURV9FTkQ6CisJCS8qIE11bHRp
LXBhcnQgd3JpdGUsIDJuZCBieXRlIHJlY2VpdmVkIGlzIGxlbmd0aCAqLworCQlpZiAoc3NpZl9i
bWMtPm1zZ19pZHggPT0gMSkgeworCQkJc3NpZl9ibWMtPnJlcXVlc3QubGVuICs9ICp2YWw7CisJ
CQlzc2lmX2JtYy0+cmVjdl9sZW4gPSAqdmFsOworCQl9IGVsc2UgeworCQkJYnVmW3NzaWZfYm1j
LT5tc2dfaWR4IC0gMSArCisJCQkgICAgc3NpZl9ibWMtPnJlcXVlc3QubGVuIC0gc3NpZl9ibWMt
PnJlY3ZfbGVuXQk9ICp2YWw7CisJCX0KKworCQlzc2lmX2JtYy0+bXNnX2lkeCsrOworCisJCWJy
ZWFrOworCWRlZmF1bHQ6CisJCS8qIERvIG5vdCBleHBlY3QgdG8gZ28gdG8gdGhpcyBjYXNlICov
CisJCXByX2VycigiRXJyb3I6IFVuZXhwZWN0ZWQgU01CdXMgY29tbWFuZCByZWNlaXZlZCAweCV4
XG4iLCBzc2lmX2JtYy0+c21idXNfY21kKTsKKwkJYnJlYWs7CisJfQorfQorCitzdGF0aWMgYm9v
bCB2YWxpZGF0ZV9wZWMoc3RydWN0IHNzaWZfYm1jX2N0eCAqc3NpZl9ibWMpCit7CisJdTggcnBl
YyA9IDAsIGNwZWMgPSAwOworCWJvb2wgcmV0ID0gdHJ1ZTsKKwl1OCBhZGRyLCBpbmRleDsKKwl1
OCAqYnVmOworCisJYnVmID0gKHU4ICopJnNzaWZfYm1jLT5yZXF1ZXN0OworCXN3aXRjaCAoc3Np
Zl9ibWMtPnNtYnVzX2NtZCkgeworCWNhc2UgU1NJRl9JUE1JX1NJTkdMRVBBUlRfV1JJVEU6CisJ
CWlmICgoc3NpZl9ibWMtPm1zZ19pZHggLSAxKSA9PSBzc2lmX21zZ19sZW4oJnNzaWZfYm1jLT5y
ZXF1ZXN0KSkgeworCQkJLyogUEVDIGlzIG5vdCBpbmNsdWRlZCAqLworCQkJc3NpZl9ibWMtPnBl
Y19zdXBwb3J0ID0gZmFsc2U7CisJCQlyZXR1cm4gdHJ1ZTsKKwkJfQorCisJCWlmICgoc3NpZl9i
bWMtPm1zZ19pZHggLSAxKSAhPSAoc3NpZl9tc2dfbGVuKCZzc2lmX2JtYy0+cmVxdWVzdCkgKyAx
KSkKKwkJCWdvdG8gZXJyb3I7CisKKwkJLyogUEVDIGlzIGluY2x1ZGVkICovCisJCXNzaWZfYm1j
LT5wZWNfc3VwcG9ydCA9IHRydWU7CisJCXJwZWMgPSBidWZbc3NpZl9ibWMtPm1zZ19pZHggLSAy
XTsKKwkJYWRkciA9IEdFVF84QklUX0FERFIoc3NpZl9ibWMtPmNsaWVudC0+YWRkcik7CisJCWNw
ZWMgPSBpMmNfc21idXNfcGVjKGNwZWMsICZhZGRyLCAxKTsKKwkJY3BlYyA9IGkyY19zbWJ1c19w
ZWMoY3BlYywgJnNzaWZfYm1jLT5zbWJ1c19jbWQsIDEpOworCQljcGVjID0gaTJjX3NtYnVzX3Bl
YyhjcGVjLCBidWYsIHNzaWZfbXNnX2xlbigmc3NpZl9ibWMtPnJlcXVlc3QpKTsKKwkJaWYgKHJw
ZWMgIT0gY3BlYykgeworCQkJcHJfZXJyKCJCYWQgUEVDIDB4JTAyeCB2cy4gMHglMDJ4XG4iLCBy
cGVjLCBjcGVjKTsKKwkJCXJldCA9IGZhbHNlOworCQl9CisKKwkJYnJlYWs7CisJY2FzZSBTU0lG
X0lQTUlfTVVMVElQQVJUX1dSSVRFX1NUQVJUOgorCWNhc2UgU1NJRl9JUE1JX01VTFRJUEFSVF9X
UklURV9NSURETEU6CisJY2FzZSBTU0lGX0lQTUlfTVVMVElQQVJUX1dSSVRFX0VORDoKKwkJaW5k
ZXggPSBzc2lmX2JtYy0+cmVxdWVzdC5sZW4gLSBzc2lmX2JtYy0+cmVjdl9sZW47CisJCWlmICgo
c3NpZl9ibWMtPm1zZ19pZHggLSAxICsgaW5kZXgpID09IHNzaWZfbXNnX2xlbigmc3NpZl9ibWMt
PnJlcXVlc3QpKSB7CisJCQkvKiBQRUMgaXMgbm90IGluY2x1ZGVkICovCisJCQlzc2lmX2JtYy0+
cGVjX3N1cHBvcnQgPSBmYWxzZTsKKwkJCXJldHVybiB0cnVlOworCQl9CisKKwkJaWYgKChzc2lm
X2JtYy0+bXNnX2lkeCAtIDEgKyBpbmRleCkgIT0gKHNzaWZfbXNnX2xlbigmc3NpZl9ibWMtPnJl
cXVlc3QpICsgMSkpCisJCQlnb3RvIGVycm9yOworCisJCS8qIFBFQyBpcyBpbmNsdWRlZCAqLwor
CQlzc2lmX2JtYy0+cGVjX3N1cHBvcnQgPSB0cnVlOworCQlycGVjID0gYnVmW3NzaWZfYm1jLT5t
c2dfaWR4IC0gMiArIGluZGV4XTsKKwkJYWRkciA9IEdFVF84QklUX0FERFIoc3NpZl9ibWMtPmNs
aWVudC0+YWRkcik7CisJCWNwZWMgPSBpMmNfc21idXNfcGVjKGNwZWMsICZhZGRyLCAxKTsKKwkJ
Y3BlYyA9IGkyY19zbWJ1c19wZWMoY3BlYywgJnNzaWZfYm1jLT5zbWJ1c19jbWQsIDEpOworCQlj
cGVjID0gaTJjX3NtYnVzX3BlYyhjcGVjLCAmc3NpZl9ibWMtPnJlY3ZfbGVuLCAxKTsKKwkJLyog
QXMgU01CdXMgc3BlY2lmaWNhdGlvbiBkb2VzIG5vdCBhbGxvdyB0aGUgbGVuZ3RoCisJCSAqIChi
eXRlIGNvdW50KSBpbiB0aGUgV3JpdGUtQmxvY2sgcHJvdG9jb2wgdG8gYmUgemVyby4KKwkJICog
VGhlcmVmb3JlLCBpdCBpcyBpbGxlZ2FsIHRvIGhhdmUgdGhlIGxhc3QgTWlkZGxlCisJCSAqIHRy
YW5zYWN0aW9uIGluIHRoZSBzZXF1ZW5jZSBjYXJyeSAzMi1ieXRlcyBhbmQgaGF2ZQorCQkgKiBh
IGxlbmd0aCBvZiDigJgw4oCZIGluIHRoZSBFbmQgdHJhbnNhY3Rpb24uCisJCSAqIEJ1dCBzb21l
IHVzZXJzIG1heSB0cnkgdG8gdXNlIHRoaXMgd2F5IGFuZCB3ZSBzaG91bGQKKwkJICogcHJldmVu
dCBzc2lmX2JtYyBkcml2ZXIgYnJva2VuIGluIHRoaXMgY2FzZS4KKwkJICovCisJCWlmIChzc2lm
X2JtYy0+cmVjdl9sZW4gIT0gMCkKKwkJCWNwZWMgPSBpMmNfc21idXNfcGVjKGNwZWMsIGJ1ZiAr
IDEgKyBpbmRleCwgc3NpZl9ibWMtPnJlY3ZfbGVuKTsKKworCQlpZiAocnBlYyAhPSBjcGVjKSB7
CisJCQlwcl9lcnIoIkJhZCBQRUMgMHglMDJ4IHZzLiAweCUwMnhcbiIsIHJwZWMsIGNwZWMpOwor
CQkJcmV0ID0gZmFsc2U7CisJCX0KKworCQlicmVhazsKKwlkZWZhdWx0OgorCQlicmVhazsKKwl9
CisKKwlyZXR1cm4gcmV0OworZXJyb3I6CisJLyogRG8gbm90IGV4cGVjdCB0byBnbyB0byB0aGlz
IGNhc2UgKi8KKwlwcl9lcnIoIkVycm9yOiBVbmV4cGVjdGVkIGxlbmd0aCByZWNlaXZlZCAlZFxu
Iiwgc3NpZl9tc2dfbGVuKCZzc2lmX2JtYy0+cmVxdWVzdCkpOworCisJcmV0dXJuIGZhbHNlOwor
fQorCitzdGF0aWMgdm9pZCBjb21wbGV0ZV93cml0ZV9yZWNlaXZlZChzdHJ1Y3Qgc3NpZl9ibWNf
Y3R4ICpzc2lmX2JtYykKK3sKKwl1OCBjbWQgPSBzc2lmX2JtYy0+c21idXNfY21kOworCisJLyog
QSBCTUMgdGhhdCByZWNlaXZlcyBhbiBpbnZhbGlkIFBFQyBzaGFsbCBkcm9wIHRoZSBkYXRhIGZv
ciB0aGUgd3JpdGUKKwkgKiB0cmFuc2FjdGlvbiBhbmQgYW55IGZ1cnRoZXIgdHJhbnNhY3Rpb25z
IChyZWFkIG9yIHdyaXRlKSB1bnRpbAorCSAqIHRoZSBuZXh0IHZhbGlkIHJlYWQgb3Igd3JpdGUg
U3RhcnQgdHJhbnNhY3Rpb24gaXMgcmVjZWl2ZWQKKwkgKi8KKwlpZiAoIXZhbGlkYXRlX3BlYyhz
c2lmX2JtYykpIHsKKwkJcHJfZXJyKCJSZWNlaXZlZCBpbnZhbGlkIFBFQ1xuIik7CisJCXJldHVy
bjsKKwl9CisKKwlpZiAoY21kID09IFNTSUZfSVBNSV9TSU5HTEVQQVJUX1dSSVRFIHx8IGNtZCA9
PSBTU0lGX0lQTUlfTVVMVElQQVJUX1dSSVRFX0VORCkKKwkJaGFuZGxlX3JlcXVlc3Qoc3NpZl9i
bWMpOworfQorCisvKgorICogQ2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIEkyQyBzbGF2ZSBl
dmVudHMKKyAqLworc3RhdGljIGludCBzc2lmX2JtY19jYihzdHJ1Y3QgaTJjX2NsaWVudCAqY2xp
ZW50LCBlbnVtIGkyY19zbGF2ZV9ldmVudCBldmVudCwgdTggKnZhbCkKK3sKKwlzdHJ1Y3Qgc3Np
Zl9ibWNfY3R4ICpzc2lmX2JtYyA9IGkyY19nZXRfY2xpZW50ZGF0YShjbGllbnQpOworCisJc3Bp
bl9sb2NrKCZzc2lmX2JtYy0+bG9jayk7CisKKwkvKiBJMkMgRXZlbnQgSGFuZGxlcjoKKwkgKiAg
IEkyQ19TTEFWRV9SRUFEX1JFUVVFU1RFRAkweDAKKwkgKiAgIEkyQ19TTEFWRV9XUklURV9SRVFV
RVNURUQJMHgxCisJICogICBJMkNfU0xBVkVfUkVBRF9QUk9DRVNTRUQJMHgyCisJICogICBJMkNf
U0xBVkVfV1JJVEVfUkVDRUlWRUQJMHgzCisJICogICBJMkNfU0xBVkVfU1RPUAkJMHg0CisJICov
CisJc3dpdGNoIChldmVudCkgeworCWNhc2UgSTJDX1NMQVZFX1JFQURfUkVRVUVTVEVEOgorCQlz
c2lmX2JtYy0+bXNnX2lkeCA9IDA7CisJCWlmIChzc2lmX2JtYy0+aXNfc2luZ2xlcGFydF9yZWFk
KQorCQkJc2V0X3NpbmdsZXBhcnRfcmVzcG9uc2VfYnVmZmVyKHNzaWZfYm1jLCB2YWwpOworCQll
bHNlCisJCQlzZXRfbXVsdGlwYXJ0X3Jlc3BvbnNlX2J1ZmZlcihzc2lmX2JtYywgdmFsKTsKKwkJ
YnJlYWs7CisKKwljYXNlIEkyQ19TTEFWRV9XUklURV9SRVFVRVNURUQ6CisJCXNzaWZfYm1jLT5t
c2dfaWR4ID0gMDsKKwkJYnJlYWs7CisKKwljYXNlIEkyQ19TTEFWRV9SRUFEX1BST0NFU1NFRDoK
KwkJaGFuZGxlX3JlYWRfcHJvY2Vzc2VkKHNzaWZfYm1jLCB2YWwpOworCQlicmVhazsKKworCWNh
c2UgSTJDX1NMQVZFX1dSSVRFX1JFQ0VJVkVEOgorCQkvKgorCQkgKiBGaXJzdCBieXRlIGlzIFNN
QlVTIGNvbW1hbmQsIG5vdCBhIHBhcnQgb2YgU1NJRiBtZXNzYWdlLgorCQkgKiBTU0lGIHJlcXVl
c3QgYnVmZmVyIHN0YXJ0cyB3aXRoIG1zZ19pZHggMSBmb3IgdGhlIGZpcnN0CisJCSAqICBidWZm
ZXIgYnl0ZS4KKwkJICovCisJCWlmIChzc2lmX2JtYy0+bXNnX2lkeCA9PSAwKSB7CisJCQkvKiBT
TUJVUyBjb21tYW5kIGNhbiB2YXJ5IChzaW5nbGUgb3IgbXVsdGktcGFydCkgKi8KKwkJCXNzaWZf
Ym1jLT5zbWJ1c19jbWQgPSAqdmFsOworCQkJc3NpZl9ibWMtPm1zZ19pZHgrKzsKKwkJfSBlbHNl
IHsKKwkJCWhhbmRsZV93cml0ZV9yZWNlaXZlZChzc2lmX2JtYywgdmFsKTsKKwkJfQorCisJCWJy
ZWFrOworCisJY2FzZSBJMkNfU0xBVkVfU1RPUDoKKwkJLyoKKwkJICogUEVDIGJ5dGUgaXMgYXBw
ZW5kZWQgYXQgdGhlIGVuZCBvZiBlYWNoIHRyYW5zYWN0aW9uLgorCQkgKiBEZXRlY3QgUEVDIGlz
IHN1cHBvcnQgb3Igbm90IGFmdGVyIHJlY2VpdmluZyB3cml0ZSByZXF1ZXN0CisJCSAqIGNvbXBs
ZXRlbHkuCisJCSAqLworCQlpZiAoc3NpZl9ibWMtPmxhc3RfZXZlbnQgPT0gSTJDX1NMQVZFX1dS
SVRFX1JFQ0VJVkVEKQorCQkJY29tcGxldGVfd3JpdGVfcmVjZWl2ZWQoc3NpZl9ibWMpOworCQkv
KiBSZXNldCBtZXNzYWdlIGluZGV4ICovCisJCXNzaWZfYm1jLT5tc2dfaWR4ID0gMDsKKwkJYnJl
YWs7CisKKwlkZWZhdWx0OgorCQlicmVhazsKKwl9CisJc3NpZl9ibWMtPmxhc3RfZXZlbnQgPSBl
dmVudDsKKwlzcGluX3VubG9jaygmc3NpZl9ibWMtPmxvY2spOworCisJcmV0dXJuIDA7Cit9CisK
K3N0cnVjdCBzc2lmX2JtY19jdHggKnNzaWZfYm1jX2FsbG9jKHN0cnVjdCBpMmNfY2xpZW50ICpj
bGllbnQsIGludCBzaXplb2ZfcHJpdikKK3sKKwlzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2Jt
YzsKKwlpbnQgcmV0OworCisJc3NpZl9ibWMgPSBkZXZtX2t6YWxsb2MoJmNsaWVudC0+ZGV2LCBz
aXplb2YoKnNzaWZfYm1jKSArIHNpemVvZl9wcml2LCBHRlBfS0VSTkVMKTsKKwlpZiAoIXNzaWZf
Ym1jKQorCQlyZXR1cm4gRVJSX1BUUigtRU5PTUVNKTsKKworCXNwaW5fbG9ja19pbml0KCZzc2lm
X2JtYy0+bG9jayk7CisKKwlpbml0X3dhaXRxdWV1ZV9oZWFkKCZzc2lmX2JtYy0+d2FpdF9xdWV1
ZSk7CisJc3NpZl9ibWMtPnJlcXVlc3RfYXZhaWxhYmxlID0gZmFsc2U7CisJc3NpZl9ibWMtPnJl
c3BvbnNlX2luX3Byb2dyZXNzID0gZmFsc2U7CisKKwltdXRleF9pbml0KCZzc2lmX2JtYy0+Zmls
ZV9tdXRleCk7CisKKwkvKiBSZWdpc3RlciBtaXNjIGRldmljZSBpbnRlcmZhY2UgKi8KKwlzc2lm
X2JtYy0+bWlzY2Rldi5taW5vciA9IE1JU0NfRFlOQU1JQ19NSU5PUjsKKwlzc2lmX2JtYy0+bWlz
Y2Rldi5uYW1lID0gREVWSUNFX05BTUU7CisJc3NpZl9ibWMtPm1pc2NkZXYuZm9wcyA9ICZzc2lm
X2JtY19mb3BzOworCXNzaWZfYm1jLT5taXNjZGV2LnBhcmVudCA9ICZjbGllbnQtPmRldjsKKwly
ZXQgPSBtaXNjX3JlZ2lzdGVyKCZzc2lmX2JtYy0+bWlzY2Rldik7CisJaWYgKHJldCkKKwkJZ290
byBvdXQ7CisKKwlzc2lmX2JtYy0+Y2xpZW50ID0gY2xpZW50OworCXNzaWZfYm1jLT5jbGllbnQt
PmZsYWdzIHw9IEkyQ19DTElFTlRfU0xBVkU7CisKKwkvKiBSZWdpc3RlciBJMkMgc2xhdmUgKi8K
KwlpMmNfc2V0X2NsaWVudGRhdGEoY2xpZW50LCBzc2lmX2JtYyk7CisJcmV0ID0gaTJjX3NsYXZl
X3JlZ2lzdGVyKGNsaWVudCwgc3NpZl9ibWNfY2IpOworCWlmIChyZXQpIHsKKwkJbWlzY19kZXJl
Z2lzdGVyKCZzc2lmX2JtYy0+bWlzY2Rldik7CisJCWdvdG8gb3V0OworCX0KKworCXJldHVybiBz
c2lmX2JtYzsKKworb3V0OgorCWRldm1fa2ZyZWUoJmNsaWVudC0+ZGV2LCBzc2lmX2JtYyk7CisJ
cmV0dXJuIEVSUl9QVFIocmV0KTsKK30KK0VYUE9SVF9TWU1CT0woc3NpZl9ibWNfYWxsb2MpOwor
CitNT0RVTEVfQVVUSE9SKCJDaHVvbmcgVHJhbiA8Y2h1b25nQG9zLmFtcGVyZWNvbXB1dGluZy5j
b20+Iik7CitNT0RVTEVfQVVUSE9SKCJRdWFuIE5ndXllbiA8cXVhbkBvcy5hbXBlcmVjb21wdXRp
bmcuY29tPiIpOworTU9EVUxFX0RFU0NSSVBUSU9OKCJMaW51eCBkZXZpY2UgZHJpdmVyIG9mIHRo
ZSBCTUMgSVBNSSBTU0lGIGludGVyZmFjZS4iKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvY2hhci9pcG1pL3NzaWZfYm1jLmggYi9kcml2ZXJzL2NoYXIv
aXBtaS9zc2lmX2JtYy5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4u
YTJlZTA5MDU3MmRiCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9jaGFyL2lwbWkvc3NpZl9i
bWMuaApAQCAtMCwwICsxLDkyIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIu
MCsgKi8KKy8qCisgKiBUaGUgZHJpdmVyIGZvciBCTUMgc2lkZSBvZiBTU0lGIGludGVyZmFjZQor
ICoKKyAqIENvcHlyaWdodCAoYykgMjAyMSwgQW1wZXJlIENvbXB1dGluZyBMTEMKKyAqCisgKiBU
aGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5k
L29yCisgKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJs
aWMgTGljZW5zZSBhcworICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRp
b247IGVpdGhlciB2ZXJzaW9uIDIgb2YKKyAqIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRp
b24pIGFueSBsYXRlciB2ZXJzaW9uLgorICoKKyAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRl
ZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorICogYnV0IFdJVEhPVVQgQU5Z
IFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAqIE1FUkNI
QU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUK
KyAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisgKgorICog
WW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGlj
IExpY2Vuc2UKKyAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBz
Oi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKyAqLworI2lmbmRlZiBfX1NTSUZfQk1DX0hfXwor
I2RlZmluZSBfX1NTSUZfQk1DX0hfXworCisjZGVmaW5lIERFVklDRV9OQU1FCQkJCSJpcG1pLXNz
aWYtaG9zdCIKKworI2RlZmluZSBHRVRfOEJJVF9BRERSKGFkZHJfN2JpdCkJCSgoKGFkZHJfN2Jp
dCkgPDwgMSkgJiAweGZmKQorCisjZGVmaW5lIE1TR19QQVlMT0FEX0xFTl9NQVgJCQkyNTIKKwor
LyogQSBzdGFuZGFyZCBTTUJ1cyBUcmFuc2FjdGlvbiBpcyBsaW1pdGVkIHRvIDMyIGRhdGEgYnl0
ZXMgKi8KKyNkZWZpbmUgTUFYX1BBWUxPQURfUEVSX1RSQU5TQUNUSU9OCQkzMgorCisjZGVmaW5l
IE1BWF9JUE1JX0RBVEFfUEVSX1NUQVJUX1RSQU5TQUNUSU9OCTMwCisjZGVmaW5lIE1BWF9JUE1J
X0RBVEFfUEVSX01JRERMRV9UUkFOU0FDVElPTgkzMQorCisjZGVmaW5lIFNTSUZfSVBNSV9TSU5H
TEVQQVJUX1dSSVRFCQkweDIKKyNkZWZpbmUgU1NJRl9JUE1JX1NJTkdMRVBBUlRfUkVBRAkJMHgz
CisjZGVmaW5lIFNTSUZfSVBNSV9NVUxUSVBBUlRfV1JJVEVfU1RBUlQJCTB4NgorI2RlZmluZSBT
U0lGX0lQTUlfTVVMVElQQVJUX1dSSVRFX01JRERMRQkweDcKKyNkZWZpbmUgU1NJRl9JUE1JX01V
TFRJUEFSVF9XUklURV9FTkQJCTB4OAorI2RlZmluZSBTU0lGX0lQTUlfTVVMVElQQVJUX1JFQURf
U1RBUlQJCTB4MworI2RlZmluZSBTU0lGX0lQTUlfTVVMVElQQVJUX1JFQURfTUlERExFCQkweDkK
Kworc3RydWN0IHNzaWZfbXNnIHsKKwl1OCBsZW47CisJdTggbmV0Zm5fbHVuOworCXU4IGNtZDsK
Kwl1OCBwYXlsb2FkW01TR19QQVlMT0FEX0xFTl9NQVhdOworfSBfX3BhY2tlZDsKKworc3RhdGlj
IGlubGluZSB1MzIgc3NpZl9tc2dfbGVuKHN0cnVjdCBzc2lmX21zZyAqc3NpZl9tc2cpCit7CisJ
cmV0dXJuIHNzaWZfbXNnLT5sZW4gKyAxOworfQorCisjZGVmaW5lIFNTSUZfQk1DX0JVU1kgICAw
eDAxCisjZGVmaW5lIFNTSUZfQk1DX1JFQURZICAweDAyCisKK3N0cnVjdCBzc2lmX2JtY19jdHgg
eworCXN0cnVjdCBpMmNfY2xpZW50CSpjbGllbnQ7CisJc3RydWN0IG1pc2NkZXZpY2UJbWlzY2Rl
djsKKwl1OAkJCXNtYnVzX2NtZDsKKwlzdHJ1Y3Qgc3NpZl9tc2cJCXJlcXVlc3Q7CisJYm9vbAkJ
CXJlcXVlc3RfYXZhaWxhYmxlOworCXN0cnVjdCBzc2lmX21zZwkJcmVzcG9uc2U7CisJYm9vbAkJ
CXJlc3BvbnNlX2luX3Byb2dyZXNzOworCS8qIFJlc3BvbnNlIGJ1ZmZlciBmb3IgTXVsdGktcGFy
dCBSZWFkIFRyYW5zYWN0aW9uICovCisJdTgJCQlyZXNwb25zZV9idWZbTUFYX1BBWUxPQURfUEVS
X1RSQU5TQUNUSU9OXTsKKwkvKiBGbGFnIHRvIGlkZW50aWZ5IGEgTXVsdGktcGFydCBSZWFkIFRy
YW5zYWN0aW9uICovCisJYm9vbAkJCWlzX3NpbmdsZXBhcnRfcmVhZDsKKwl1OAkJCW5ieXRlc19w
cm9jZXNzZWQ7CisJdTgJCQlyZW1haW5fbGVuOworCXU4CQkJcmVjdl9sZW47CisJLyogQmxvY2sg
TnVtYmVyIG9mIGEgTXVsdGktcGFydCBSZWFkIFRyYW5zYWN0aW9uICovCisJdTgJCQlibG9ja19u
dW07CisJc2l6ZV90CQkJbXNnX2lkeDsKKwllbnVtIGkyY19zbGF2ZV9ldmVudAlsYXN0X2V2ZW50
OworCWJvb2wJCQlwZWNfc3VwcG9ydDsKKwlzcGlubG9ja190CQlsb2NrOworCXdhaXRfcXVldWVf
aGVhZF90CXdhaXRfcXVldWU7CisJc3RydWN0IG11dGV4CQlmaWxlX211dGV4OworCXZvaWQgKCpz
ZXRfc3NpZl9ibWNfc3RhdHVzKShzdHJ1Y3Qgc3NpZl9ibWNfY3R4ICpzc2lmX2JtYywgdW5zaWdu
ZWQgaW50IGZsYWdzKTsKKwl2b2lkCQkJKnByaXY7Cit9OworCitzdGF0aWMgaW5saW5lIHN0cnVj
dCBzc2lmX2JtY19jdHggKnRvX3NzaWZfYm1jKHN0cnVjdCBmaWxlICpmaWxlKQoreworCXJldHVy
biBjb250YWluZXJfb2YoZmlsZS0+cHJpdmF0ZV9kYXRhLCBzdHJ1Y3Qgc3NpZl9ibWNfY3R4LCBt
aXNjZGV2KTsKK30KKworc3RydWN0IHNzaWZfYm1jX2N0eCAqc3NpZl9ibWNfYWxsb2Moc3RydWN0
IGkyY19jbGllbnQgKmNsaWVudCwgaW50IHNpemVvZl9wcml2KTsKKworI2VuZGlmIC8qIF9fU1NJ
Rl9CTUNfSF9fICovCmRpZmYgLS1naXQgYS9kcml2ZXJzL2NoYXIvaXBtaS9zc2lmX2JtY19hc3Bl
ZWQuYyBiL2RyaXZlcnMvY2hhci9pcG1pL3NzaWZfYm1jX2FzcGVlZC5jCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uYTU2M2ZjZmY1YWNjCi0tLSAvZGV2L251bGwKKysr
IGIvZHJpdmVycy9jaGFyL2lwbWkvc3NpZl9ibWNfYXNwZWVkLmMKQEAgLTAsMCArMSwxMzIgQEAK
Ky8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wKworLyoKKyAqIFRoZSBkcml2ZXIg
Zm9yIEJNQyBzaWRlIG9mIEFzcGVlZCBTU0lGIGludGVyZmFjZQorICoKKyAqIENvcHlyaWdodCAo
YykgMjAyMSwgQW1wZXJlIENvbXB1dGluZyBMTEMKKyAqCisgKiBUaGlzIHByb2dyYW0gaXMgZnJl
ZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yCisgKiBtb2RpZnkgaXQg
dW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcworICog
cHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9u
IDIgb2YKKyAqIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJz
aW9uLgorICoKKyAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0
IGl0IHdpbGwgYmUgdXNlZnVsLAorICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0
IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRO
RVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKKyAqIEdOVSBHZW5lcmFsIFB1
YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCisgKgorICogWW91IHNob3VsZCBoYXZlIHJl
Y2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKKyAqIGFsb25n
IHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGlj
ZW5zZXMvPi4KKyAqLworCisjaW5jbHVkZSA8bGludXgvaTJjLmg+CisjaW5jbHVkZSA8bGludXgv
bWlzY2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4
L3BvbGwuaD4KKyNpbmNsdWRlIDxsaW51eC9pb3BvbGwuaD4KKworI2luY2x1ZGUgInNzaWZfYm1j
LmgiCisKK3N0cnVjdCBhc3BlZWRfaTJjX2J1cyB7CisJc3RydWN0IGkyY19hZGFwdGVyICAgICAg
ICAgICAgICBhZGFwOworCXN0cnVjdCBkZXZpY2UgICAgICAgICAgICAgICAgICAgKmRldjsKKwl2
b2lkIF9faW9tZW0gICAgICAgICAgICAgICAgICAgICpiYXNlOworCXN0cnVjdCByZXNldF9jb250
cm9sICAgICAgICAgICAgKnJzdDsKKwkvKiBTeW5jaHJvbml6ZXMgSS9PIG1lbSBhY2Nlc3MgdG8g
YmFzZS4gKi8KKwlzcGlubG9ja190ICAgICAgICAgICAgICAgICAgICAgIGxvY2s7Cit9OworCisj
ZGVmaW5lIEFTUEVFRF9JMkNfSU5UUl9DVFJMX1JFRwkweDBjCisjZGVmaW5lIEFTUEVFRF9JMkNE
X0lOVFJfU0xBVkVfTUFUQ0gJQklUKDcpCisjZGVmaW5lIEFTUEVFRF9JMkNEX0lOVFJfUlhfRE9O
RQlCSVQoMikKK3N0YXRpYyB2b2lkIGFzcGVlZF9pMmNfZW5hYmxlX2ludGVycnVwdChzdHJ1Y3Qg
YXNwZWVkX2kyY19idXMgKmJ1cywgdW5zaWduZWQgbG9uZyBtYXNrKQoreworCXVuc2lnbmVkIGxv
bmcgY3VycmVudF9tYXNrOworCisJY3VycmVudF9tYXNrID0gcmVhZGwoYnVzLT5iYXNlICsgQVNQ
RUVEX0kyQ19JTlRSX0NUUkxfUkVHKTsKKwl3cml0ZWwoY3VycmVudF9tYXNrIHwgbWFzaywgYnVz
LT5iYXNlICsgQVNQRUVEX0kyQ19JTlRSX0NUUkxfUkVHKTsKK30KKworc3RhdGljIHZvaWQgYXNw
ZWVkX2kyY19kaXNhYmxlX2ludGVycnVwdChzdHJ1Y3QgYXNwZWVkX2kyY19idXMgKmJ1cywgdW5z
aWduZWQgbG9uZyBtYXNrKQoreworCXVuc2lnbmVkIGxvbmcgY3VycmVudF9tYXNrOworCisJY3Vy
cmVudF9tYXNrID0gcmVhZGwoYnVzLT5iYXNlICsgQVNQRUVEX0kyQ19JTlRSX0NUUkxfUkVHKTsK
Kwl3cml0ZWwoY3VycmVudF9tYXNrICYgfm1hc2ssIGJ1cy0+YmFzZSArIEFTUEVFRF9JMkNfSU5U
Ul9DVFJMX1JFRyk7Cit9CisKK3N0YXRpYyB2b2lkIGFzcGVlZF9zZXRfc3NpZl9ibWNfc3RhdHVz
KHN0cnVjdCBzc2lmX2JtY19jdHggKnNzaWZfYm1jLCB1bnNpZ25lZCBpbnQgc3RhdHVzKQorewor
CXN0cnVjdCBhc3BlZWRfaTJjX2J1cyAqYnVzOworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisKKwli
dXMgPSAoc3RydWN0IGFzcGVlZF9pMmNfYnVzICopc3NpZl9ibWMtPnByaXY7CisJaWYgKCFidXMp
CisJCXJldHVybjsKKworCXNwaW5fbG9ja19pcnFzYXZlKCZidXMtPmxvY2ssIGZsYWdzKTsKKwor
CWlmIChzdGF0dXMgJiBTU0lGX0JNQ19CVVNZKSB7CisJCS8qIElnbm9yZSBSWF9ET05FIGFuZCBT
TEFWRV9NQVRDSCB3aGVuIHNsYXZlIGJ1c3kgcHJvY2Vzc2luZyAqLworCQlhc3BlZWRfaTJjX2Rp
c2FibGVfaW50ZXJydXB0KGJ1cywgQVNQRUVEX0kyQ0RfSU5UUl9SWF9ET05FKTsKKwkJYXNwZWVk
X2kyY19kaXNhYmxlX2ludGVycnVwdChidXMsIEFTUEVFRF9JMkNEX0lOVFJfU0xBVkVfTUFUQ0gp
OworCX0gZWxzZSBpZiAoc3RhdHVzICYgU1NJRl9CTUNfUkVBRFkpIHsKKwkJLyogRW5hYmxlIFJY
X0RPTkUgYW5kIFNMQVZFX01BVENIIHdoZW4gc2xhdmUgcmVhZHkgKi8KKwkJYXNwZWVkX2kyY19l
bmFibGVfaW50ZXJydXB0KGJ1cywgQVNQRUVEX0kyQ0RfSU5UUl9SWF9ET05FKTsKKwkJYXNwZWVk
X2kyY19lbmFibGVfaW50ZXJydXB0KGJ1cywgQVNQRUVEX0kyQ0RfSU5UUl9TTEFWRV9NQVRDSCk7
CisJfQorCisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmYnVzLT5sb2NrLCBmbGFncyk7Cit9CisK
K3N0YXRpYyBpbnQgc3NpZl9ibWNfcHJvYmUoc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCwgY29u
c3Qgc3RydWN0IGkyY19kZXZpY2VfaWQgKmlkKQoreworCXN0cnVjdCBzc2lmX2JtY19jdHggKnNz
aWZfYm1jOworCisJc3NpZl9ibWMgPSBzc2lmX2JtY19hbGxvYyhjbGllbnQsIHNpemVvZihzdHJ1
Y3QgYXNwZWVkX2kyY19idXMpKTsKKwlpZiAoSVNfRVJSKHNzaWZfYm1jKSkKKwkJcmV0dXJuIFBU
Ul9FUlIoc3NpZl9ibWMpOworCisJc3NpZl9ibWMtPnByaXYgPSBpMmNfZ2V0X2FkYXBkYXRhKGNs
aWVudC0+YWRhcHRlcik7CisJc3NpZl9ibWMtPnNldF9zc2lmX2JtY19zdGF0dXMgPSBhc3BlZWRf
c2V0X3NzaWZfYm1jX3N0YXR1czsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHNzaWZf
Ym1jX3JlbW92ZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50KQoreworCXN0cnVjdCBzc2lmX2Jt
Y19jdHggKnNzaWZfYm1jID0gaTJjX2dldF9jbGllbnRkYXRhKGNsaWVudCk7CisKKwlpMmNfc2xh
dmVfdW5yZWdpc3RlcihjbGllbnQpOworCW1pc2NfZGVyZWdpc3Rlcigmc3NpZl9ibWMtPm1pc2Nk
ZXYpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lk
IHNzaWZfYm1jX21hdGNoW10gPSB7CisJeyAuY29tcGF0aWJsZSA9ICJhc3BlZWQsYXN0MjUwMC1z
c2lmLWJtYyIgfSwKKwl7IH0sCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGkyY19kZXZpY2Vf
aWQgc3NpZl9ibWNfaWRbXSA9IHsKKwl7IERFVklDRV9OQU1FLCAwIH0sCisJeyB9LAorfTsKKwor
TU9EVUxFX0RFVklDRV9UQUJMRShpMmMsIHNzaWZfYm1jX2lkKTsKKworc3RhdGljIHN0cnVjdCBp
MmNfZHJpdmVyIHNzaWZfYm1jX2RyaXZlciA9IHsKKwkuZHJpdmVyCQk9IHsKKwkJLm5hbWUJCT0g
REVWSUNFX05BTUUsCisJCS5vZl9tYXRjaF90YWJsZSA9IHNzaWZfYm1jX21hdGNoLAorCX0sCisJ
LnByb2JlCQk9IHNzaWZfYm1jX3Byb2JlLAorCS5yZW1vdmUJCT0gc3NpZl9ibWNfcmVtb3ZlLAor
CS5pZF90YWJsZQk9IHNzaWZfYm1jX2lkLAorfTsKKworbW9kdWxlX2kyY19kcml2ZXIoc3NpZl9i
bWNfZHJpdmVyKTsKKworTU9EVUxFX0FVVEhPUigiQ2h1b25nIFRyYW4gPGNodW9uZ0Bvcy5hbXBl
cmVjb21wdXRpbmcuY29tPiIpOworTU9EVUxFX0FVVEhPUigiUXVhbiBOZ3V5ZW4gPHF1YW5Ab3Mu
YW1wZXJlY29tcHV0aW5nLmNvbT4iKTsKK01PRFVMRV9ERVNDUklQVElPTigiTGludXggZGV2aWNl
IGRyaXZlciBvZiBBc3BlZWQgQk1DIElQTUkgU1NJRiBpbnRlcmZhY2UuIik7CitNT0RVTEVfTElD
RU5TRSgiR1BMIHYyIik7Ci0tIAoyLjI4LjAKCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KT3BlbmlwbWktZGV2ZWxvcGVyIG1haWxpbmcgbGlzdApPcGVu
aXBtaS1kZXZlbG9wZXJAbGlzdHMuc291cmNlZm9yZ2UubmV0Cmh0dHBzOi8vbGlzdHMuc291cmNl
Zm9yZ2UubmV0L2xpc3RzL2xpc3RpbmZvL29wZW5pcG1pLWRldmVsb3Blcgo=
